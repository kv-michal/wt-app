<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>White Noise Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .sound-control {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .sound-control:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .sound-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .sound-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sound-icon {
            font-size: 1.5rem;
        }

        .toggle-btn {
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: #4CAF50;
        }

        .toggle-btn::after {
            content: '';
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .toggle-btn.active::after {
            transform: translateX(30px);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-slider {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .volume-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .master-controls {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
        }

        .master-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .master-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .status {
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .playing {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎵 White Noise Player</h1>
        
        <div class="controls" id="soundControls">
            <!-- Sound controls will be generated by JavaScript -->
        </div>

        <div class="master-controls">
            <button class="master-btn" onclick="stopAll()">Stop All</button>
            <button class="master-btn" onclick="toggleMasterVolume()">Mute/Unmute</button>
            <div class="status" id="status">Ready to play</div>
        </div>
    </div>

    <script>
        class WhiteNoisePlayer {
            constructor() {
                this.audioContext = null;
                this.sounds = {};
                this.masterGain = null;
                this.isMuted = false;
                this.previousVolume = 0.5;
                
                this.soundDefinitions = [
                    { id: 'whitenoise', name: 'White Noise', icon: '📢', type: 'noise' },
                    { id: 'pinknoise', name: 'Pink Noise', icon: '🌸', type: 'noise' },
                    { id: 'brownnoise', name: 'Brown Noise', icon: '🤎', type: 'noise' },
                    { id: 'vacuum', name: 'Vacuum Cleaner', icon: '🧹', type: 'vacuum' },
                    { id: 'rain', name: 'Rain', icon: '🌧️', type: 'rain' },
                    { id: 'ocean', name: 'Ocean Waves', icon: '🌊', type: 'ocean' },
                    { id: 'wind', name: 'Wind', icon: '💨', type: 'wind' },
                    { id: 'fire', name: 'Crackling Fire', icon: '🔥', type: 'fire' },
                    { id: 'fan', name: 'Fan', icon: '🌀', type: 'fan' },
                    { id: 'thunder', name: 'Thunder', icon: '⚡', type: 'thunder' },
                    { id: 'birds', name: 'Forest Birds', icon: '🐦', type: 'birds' },
                    { id: 'cafe', name: 'Coffee Shop', icon: '☕', type: 'cafe' }
                ];

                this.init();
            }

            async init() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.masterGain = this.audioContext.createGain();
                    this.masterGain.connect(this.audioContext.destination);
                    this.masterGain.gain.value = 0.5;
                    
                    this.createSoundControls();
                } catch (error) {
                    console.error('Audio context initialization failed:', error);
                    document.getElementById('status').textContent = 'Audio not supported in this browser';
                }
            }

            createSoundControls() {
                const container = document.getElementById('soundControls');
                
                this.soundDefinitions.forEach(sound => {
                    const controlDiv = document.createElement('div');
                    controlDiv.className = 'sound-control';
                    controlDiv.innerHTML = `
                        <div class="sound-header">
                            <div class="sound-title">
                                <span class="sound-icon">${sound.icon}</span>
                                ${sound.name}
                            </div>
                            <button class="toggle-btn" id="toggle-${sound.id}" onclick="player.toggle('${sound.id}')"></button>
                        </div>
                        <div class="volume-control">
                            <span>🔊</span>
                            <input type="range" class="volume-slider" id="volume-${sound.id}" 
                                   min="0" max="100" value="50" 
                                   oninput="player.setVolume('${sound.id}', this.value)">
                            <span id="vol-display-${sound.id}">50%</span>
                        </div>
                    `;
                    container.appendChild(controlDiv);
                });
            }

            async toggle(soundId) {
                if (this.audioContext.state === 'suspended') {
                    await this.audioContext.resume();
                }

                if (this.sounds[soundId]) {
                    this.stop(soundId);
                } else {
                    this.start(soundId);
                }
                this.updateStatus();
            }

            start(soundId) {
                const soundDef = this.soundDefinitions.find(s => s.id === soundId);
                if (!soundDef) return;

                const gainNode = this.audioContext.createGain();
                gainNode.connect(this.masterGain);
                
                const volumeSlider = document.getElementById(`volume-${soundId}`);
                gainNode.gain.value = volumeSlider.value / 100;

                let sourceNode;
                
                switch(soundDef.type) {
                    case 'noise':
                        sourceNode = this.createNoiseSource(soundDef.id);
                        break;
                    case 'vacuum':
                        sourceNode = this.createVacuumSource();
                        break;
                    case 'rain':
                        sourceNode = this.createRainSource();
                        break;
                    case 'ocean':
                        sourceNode = this.createOceanSource();
                        break;
                    case 'wind':
                        sourceNode = this.createWindSource();
                        break;
                    case 'fire':
                        sourceNode = this.createFireSource();
                        break;
                    case 'fan':
                        sourceNode = this.createFanSource();
                        break;
                    case 'thunder':
                        sourceNode = this.createThunderSource();
                        break;
                    case 'birds':
                        sourceNode = this.createBirdsSource();
                        break;
                    case 'cafe':
                        sourceNode = this.createCafeSource();
                        break;
                    default:
                        sourceNode = this.createNoiseSource('whitenoise');
                }

                if (sourceNode) {
                    sourceNode.connect(gainNode);
                    sourceNode.start();
                    
                    this.sounds[soundId] = {
                        source: sourceNode,
                        gain: gainNode
                    };

                    document.getElementById(`toggle-${soundId}`).classList.add('active');
                    document.querySelector(`#toggle-${soundId}`).parentElement.parentElement.classList.add('playing');
                }
            }

            stop(soundId) {
                if (this.sounds[soundId]) {
                    this.sounds[soundId].source.stop();
                    delete this.sounds[soundId];
                    
                    document.getElementById(`toggle-${soundId}`).classList.remove('active');
                    document.querySelector(`#toggle-${soundId}`).parentElement.parentElement.classList.remove('playing');
                }
            }

            setVolume(soundId, volume) {
                if (this.sounds[soundId]) {
                    this.sounds[soundId].gain.gain.value = volume / 100;
                }
                document.getElementById(`vol-display-${soundId}`).textContent = volume + '%';
            }

            createNoiseSource(type) {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        switch(type) {
                            case 'whitenoise':
                                output[i] = Math.random() * 2 - 1;
                                break;
                            case 'pinknoise':
                                output[i] = this.generatePinkNoise();
                                break;
                            case 'brownnoise':
                                output[i] = this.generateBrownNoise();
                                break;
                        }
                    }
                };
                
                return scriptNode;
            }

            generatePinkNoise() {
                if (!this.pinkNoiseState) {
                    this.pinkNoiseState = [0, 0, 0, 0, 0, 0, 0];
                }
                
                const white = Math.random() * 2 - 1;
                this.pinkNoiseState[0] = 0.99886 * this.pinkNoiseState[0] + white * 0.0555179;
                this.pinkNoiseState[1] = 0.99332 * this.pinkNoiseState[1] + white * 0.0750759;
                this.pinkNoiseState[2] = 0.96900 * this.pinkNoiseState[2] + white * 0.1538520;
                this.pinkNoiseState[3] = 0.86650 * this.pinkNoiseState[3] + white * 0.3104856;
                this.pinkNoiseState[4] = 0.55000 * this.pinkNoiseState[4] + white * 0.5329522;
                this.pinkNoiseState[5] = -0.7616 * this.pinkNoiseState[5] - white * 0.0168980;
                
                const pink = this.pinkNoiseState[0] + this.pinkNoiseState[1] + this.pinkNoiseState[2] + 
                           this.pinkNoiseState[3] + this.pinkNoiseState[4] + this.pinkNoiseState[5] + 
                           this.pinkNoiseState[6] + white * 0.5362;
                
                this.pinkNoiseState[6] = white * 0.115926;
                return pink * 0.11;
            }

            generateBrownNoise() {
                if (!this.brownNoiseState) this.brownNoiseState = 0;
                const white = Math.random() * 2 - 1;
                this.brownNoiseState = (this.brownNoiseState + (0.02 * white)) / 1.02;
                return this.brownNoiseState * 3.5;
            }

            createVacuumSource() {
                const oscillator1 = this.audioContext.createOscillator();
                const oscillator2 = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();
                
                oscillator1.type = 'sawtooth';
                oscillator1.frequency.setValueAtTime(60, this.audioContext.currentTime);
                
                oscillator2.type = 'square';
                oscillator2.frequency.setValueAtTime(120, this.audioContext.currentTime);
                
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(800, this.audioContext.currentTime);
                filter.Q.setValueAtTime(1, this.audioContext.currentTime);
                
                const merger = this.audioContext.createChannelMerger(2);
                oscillator1.connect(gainNode);
                oscillator2.connect(gainNode);
                gainNode.connect(filter);
                filter.connect(merger);
                
                // Add some modulation for realism
                const lfo = this.audioContext.createOscillator();
                const lfoGain = this.audioContext.createGain();
                lfo.frequency.setValueAtTime(0.5, this.audioContext.currentTime);
                lfoGain.gain.setValueAtTime(20, this.audioContext.currentTime);
                lfo.connect(lfoGain);
                lfoGain.connect(filter.frequency);
                lfo.start();
                
                gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                
                return merger;
            }

            createRainSource() {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        let sample = Math.random() * 2 - 1;
                        sample = sample * Math.random() * 0.5; // Rain-like droplet sounds
                        output[i] = sample;
                    }
                };
                
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'bandpass';
                filter.frequency.setValueAtTime(2000, this.audioContext.currentTime);
                filter.Q.setValueAtTime(0.5, this.audioContext.currentTime);
                
                scriptNode.connect(filter);
                return filter;
            }

            createOceanSource() {
                const oscillator1 = this.audioContext.createOscillator();
                const oscillator2 = this.audioContext.createOscillator();
                const gainNode1 = this.audioContext.createGain();
                const gainNode2 = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();
                
                oscillator1.type = 'sine';
                oscillator1.frequency.setValueAtTime(0.1, this.audioContext.currentTime);
                
                oscillator2.type = 'triangle';
                oscillator2.frequency.setValueAtTime(0.05, this.audioContext.currentTime);
                
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(400, this.audioContext.currentTime);
                
                gainNode1.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                gainNode2.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                
                const merger = this.audioContext.createChannelMerger(2);
                oscillator1.connect(gainNode1);
                oscillator2.connect(gainNode2);
                gainNode1.connect(filter);
                gainNode2.connect(filter);
                filter.connect(merger);
                
                return merger;
            }

            createWindSource() {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        output[i] = (Math.random() * 2 - 1) * 0.5;
                    }
                };
                
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'highpass';
                filter.frequency.setValueAtTime(100, this.audioContext.currentTime);
                
                scriptNode.connect(filter);
                return filter;
            }

            createFireSource() {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        let sample = Math.random() * 2 - 1;
                        if (Math.random() < 0.01) sample *= 3; // Occasional crackles
                        output[i] = sample * 0.3;
                    }
                };
                
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'bandpass';
                filter.frequency.setValueAtTime(1500, this.audioContext.currentTime);
                filter.Q.setValueAtTime(2, this.audioContext.currentTime);
                
                scriptNode.connect(filter);
                return filter;
            }

            createFanSource() {
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();
                
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(40, this.audioContext.currentTime);
                
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(200, this.audioContext.currentTime);
                
                gainNode.gain.setValueAtTime(0.4, this.audioContext.currentTime);
                
                oscillator.connect(gainNode);
                gainNode.connect(filter);
                
                return filter;
            }

            createThunderSource() {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                let thunderTimer = 0;
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        thunderTimer++;
                        if (thunderTimer > 44100 * 10 && Math.random() < 0.0001) { // Thunder every ~10 seconds randomly
                            output[i] = (Math.random() * 2 - 1) * 2;
                            thunderTimer = 0;
                        } else {
                            output[i] = (Math.random() * 2 - 1) * 0.1; // Light rain between thunder
                        }
                    }
                };
                
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(100, this.audioContext.currentTime);
                
                scriptNode.connect(filter);
                return filter;
            }

            createBirdsSource() {
                const oscillator1 = this.audioContext.createOscillator();
                const oscillator2 = this.audioContext.createOscillator();
                const gainNode1 = this.audioContext.createGain();
                const gainNode2 = this.audioContext.createGain();
                
                oscillator1.type = 'sine';
                oscillator1.frequency.setValueAtTime(2000, this.audioContext.currentTime);
                
                oscillator2.type = 'triangle';
                oscillator2.frequency.setValueAtTime(3000, this.audioContext.currentTime);
                
                gainNode1.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode2.gain.setValueAtTime(0.05, this.audioContext.currentTime);
                
                // Modulation for bird-like sounds
                const lfo = this.audioContext.createOscillator();
                const lfoGain = this.audioContext.createGain();
                lfo.frequency.setValueAtTime(5, this.audioContext.currentTime);
                lfoGain.gain.setValueAtTime(500, this.audioContext.currentTime);
                lfo.connect(lfoGain);
                lfoGain.connect(oscillator1.frequency);
                lfo.start();
                
                const merger = this.audioContext.createChannelMerger(2);
                oscillator1.connect(gainNode1);
                oscillator2.connect(gainNode2);
                gainNode1.connect(merger);
                gainNode2.connect(merger);
                
                return merger;
            }

            createCafeSource() {
                const bufferSize = 4096;
                const scriptNode = this.audioContext.createScriptProcessor(bufferSize, 0, 1);
                
                scriptNode.onaudioprocess = (event) => {
                    const output = event.outputBuffer.getChannelData(0);
                    
                    for (let i = 0; i < bufferSize; i++) {
                        let sample = (Math.random() * 2 - 1) * 0.2; // Base chatter
                        if (Math.random() < 0.001) sample += (Math.random() * 2 - 1) * 0.5; // Occasional sounds
                        output[i] = sample;
                    }
                };
                
                const filter = this.audioContext.createBiquadFilter();
                filter.type = 'bandpass';
                filter.frequency.setValueAtTime(1000, this.audioContext.currentTime);
                filter.Q.setValueAtTime(1, this.audioContext.currentTime);
                
                scriptNode.connect(filter);
                return filter;
            }

            stopAll() {
                Object.keys(this.sounds).forEach(soundId => {
                    this.stop(soundId);
                });
                this.updateStatus();
            }

            toggleMasterVolume() {
                if (this.isMuted) {
                    this.masterGain.gain.value = this.previousVolume;
                    this.isMuted = false;
                } else {
                    this.previousVolume = this.masterGain.gain.value;
                    this.masterGain.gain.value = 0;
                    this.isMuted = true;
                }
                this.updateStatus();
            }

            updateStatus() {
                const playingCount = Object.keys(this.sounds).length;
                const status = document.getElementById('status');
                
                if (playingCount === 0) {
                    status.textContent = 'Ready to play';
                } else if (this.isMuted) {
                    status.textContent = `${playingCount} sound${playingCount > 1 ? 's' : ''} playing (Muted)`;
                } else {
                    status.textContent = `${playingCount} sound${playingCount > 1 ? 's' : ''} currently playing`;
                }
            }
        }

        // Initialize the player
        let player;
        
        window.addEventListener('load', () => {
            player = new WhiteNoisePlayer();
        });

        // Global functions for buttons
        function stopAll() {
            player.stopAll();
        }

        function toggleMasterVolume() {
            player.toggleMasterVolume();
        }
    </script>
</body>
</html>
